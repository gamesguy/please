<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 2 - Orpah's Story</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff;
      margin: 0;
      padding: 0;
    }
    .content {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background-color: #fdfdfd;
      border-left: 5px solid #e74c3c;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #e74c3c;
    }
    .back-link {
      display: block;
      text-align: center;
      margin-top: 20px;
      font-size: 1.2em;
      text-decoration: none;
      color: #3498db;
    }
    .back-link:hover {
      color: #1abc9c;
    }
  </style>
</head>
<body>
  <div class="content">
    <h1>Chapter 2</h1>
    <p>We both went downstairs to meet our future husbands. Oh, and by the way, we were at my parents' house—devout worshippers of Chemosh. They didn’t exactly welcome these upstart Judeans with open arms, but that wouldn’t spoil our day.

        “Orpah, your Nasi is here,” my mother said with much disdain. I could never understand why she disliked the Judeans so much—they were kind, compassionate, and handsome, unlike the family I call my own.
        
        “Orpie, come back,” Ruth whispered in my ear when she noticed that I got distracted and entered my world of thoughts again.
        
        
        “Orpah, you didn’t even greet me,” Mahlon said in a playful tone. Ohh, how much his voice gives me butterflies.
        
        
        “Hi... hii,” I said, blushing. The many years I’ve known my husband-to-be (just 2), and I still can’t get over how handsome he is. Out of the corner of my eye, I saw my older brother, Hadar, rolling his eyes.
        
        “Talk properly, you’re not a stammerer, are you?” he yelled, loud enough for everyone to hear.
        
        I saw my father chuckling, proud of his first-born son—the apple of his eye—unlike the daughter he had, who was about to be married to a flimsy Jew.
        
        But Mahlon, the father of my children, stood up and defended me, as did Ruth and her husband. Together, they navigated the tensions and led me to the marriage grounds—a beautiful spot just north of the hillside of Dibon, where the ceremony would take place.
        
     
        
        </p>
    <a href="index.html" class="back-link">Back to Chapters</a>
  </div>
  <h1>Leave a Comment</h1>
  <form id="commentForm">
      <input type="text" id="name" placeholder="Name" required />
      <textarea id="content" placeholder="Write your comment here..." required></textarea>
      <button type="submit">Submit</button>
  </form>
  
  <h2>Comments</h2>
  <div id="comments"></div>
  
  
    </div>
    <script>
        const chapter = 'chapter2'; // Change this to the chapter identifier for each page
        
       // Fetch existing comments for the specific chapter
async function fetchComments() {
    const res = await fetch(`/comments/${chapter}`);
    const comments = await res.json();
    const commentsDiv = document.getElementById('comments');
    commentsDiv.innerHTML = comments.map(c => `<p><strong>${c.name}:</strong> ${c.content}</p>`).join('');
}

document.getElementById('commentForm').onsubmit = async (e) => {
    e.preventDefault();

    // Get the name from an input field instead of prompting
    const name = document.getElementById('name').value; // Assume there's an input field for name
    const content = document.getElementById('content').value;

    if (name && content) { // Check both name and content are provided
        await fetch(`/comments/${chapter}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, content })
        });

        document.getElementById('commentForm').reset();
        fetchComments(); // Refresh comments after submission
    }
};

// Fetch comments when the page loads
fetchComments();
        </script>
        
  <style>form {
      margin: 20px 0;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }
  
  input[type="text"],
  textarea {
      width: calc(100% - 22px);
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
  }
  
  button {
      background-color: #3498db;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
  }
  
  button:hover {
      background-color: #1abc9c;
  }
  
  h2 {
      margin-top: 30px;
  }
  </style>
</body>
</html>
